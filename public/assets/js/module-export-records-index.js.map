{"version":3,"sources":["src/module-export-records-index.js"],"names":["idUrl","idForm","className","inputClassName","listenedIDs","ModuleExtendedCDRs","$formObj","$","$checkBoxes","$dropDowns","saveTableAJAXUrl","globalRootUrl","deleteRecordAJAXUrl","$disabilityFields","$statusToggle","$moduleStatus","$cdrTable","$outgoingEmployeeCalls","$globalSearch","$dateRangeSelector","dataTable","players","validateRules","validateVariantRules","title","identifier","rules","type","prompt","globalTranslate","repModuleExtendedCDRs_Form_titleReportError","minBillSec","dateMonth","repModuleExtendedCDRs_Form_DateMonthError","day","repModuleExtendedCDRs_Form_DayError","time","repModuleExtendedCDRs_Form_TimeError","email","repModuleExtendedCDRs_Form_EmailError","initialize","removeClass","hide","remove","addClass","css","popup","inline","target","position","hoverable","delay","show","changeReportVariant","initializeDateRangeSelector","window","checkbox","dropdown","onChange","applyFilter","addEventListener","checkStatusToggle","initializeForm","tab","document","on","e","stopPropagation","parent","parents","children","reportId","attr","form","find","text","trim","fields","reportNameID","variantId","sendingReport","contentDiv","saveSearchSettings","timestamp","Date","now","parentTitle","html","newItem","siblings","append","trigger","undefined","self","ajax","url","headers","data","success","response","error","xhr","status","console","startCreateExcelPDF","encodedSearch","encodeURIComponent","getSearchText","location","origin","open","closest","keyCode","val","length","keydown","event","preventDefault","search","serverSide","processing","info","columnDefs","defaultContent","targets","paging","sDom","deferRender","pageLength","calculatePageLength","createdRow","row","eq","callerId","number","billHourCalls","billMinCalls","billSecCalls","countCalls","drawCallback","settings","pagination","_iDisplayLength","fnRecordsDisplay","language","SemanticLocalization","dataTableLocalisation","ordering","dataSrc","json","recordsFiltered","recordsIncoming","recordsMissed","recordsOutgoing","typeCall","stripeClasses","detailedIcon","DT_RowClass","indexOf","duration","ids","lineText","line","did","waitTime","stateCall","Extensions","updatePhonesRepresent","forEach","id","element","DataTable","tr","hasClass","after","showRecords","each","index","playerRow","CDRPlayer","updateSettings","updateSyncState","setInterval","currentVariantId","page","len","draw","variantName","contents","filter","nodeType","nodeValue","JSON","parse","decodeURIComponent","dateRangeSelector","periods","getStandardPeriods","defPeriod","moment","format","endOf","globalSearch","additionalFilter","split","divProgress","method","stateData","lastId","nowId","progress","total","value","active","repModuleExtendedCDRs_syncState","jqXHR","textStatus","errorThrown","htmlPlayer","record","i","srcAudio","srcDownloadAudio","recordingfile","recordFileName","prettyFilename","recordFileUri","start","src_num","dst_num","billsec","stateCallIndex","audioPlayHandler","detailRow","callIdDetail","push","callId","replace","allPositive","Set","rowHeight","first","outerHeight","windowHeight","innerHeight","headerFooterHeight","Math","max","floor","additionalExportFunctions","body","newRow","nameCell","usersCell","buttonsCell","headersCell","table","rows","rowData","name","dstUrl","users","log","key","ruleSaveResult","hasOwnProperty","syncRules","RegExp","showRuleOptions","modal","closable","removeRule","period","options","ranges","repModuleExtendedCDRs_cdr_cal_Today","repModuleExtendedCDRs_cdr_cal_Yesterday","subtract","repModuleExtendedCDRs_cdr_cal_LastWeek","repModuleExtendedCDRs_cdr_cal_Last30Days","repModuleExtendedCDRs_cdr_cal_ThisMonth","startOf","repModuleExtendedCDRs_cdr_cal_LastMonth","alwaysShowCalendars","autoUpdateInput","linkedCalendars","maxDate","locale","separator","applyLabel","cal_ApplyBtn","cancelLabel","cal_CancelBtn","fromLabel","cal_from","toLabel","cal_to","customRangeLabel","cal_CustomPeriod","daysOfWeek","calendarText","days","monthNames","months","firstDay","startDate","endDate","daterangepicker","cbDateRangeSelectorOnSelect","end","label","retStandardPeriod","disableGlobalSearch","minBilSec","stringify","sendingScheduledReport","getMaxWidth","maxLength","toString","startDownload","startTime","endTime","typeRec","numbers","startDownloadHistory","makeDropdownList","selectType","selected","values","obj","changeGroupInList","choice","tdInput","currentRowId","tableName","sendChangesToServer","initTable","columns","columnsArray4Sort","colName","ajaxUrl","infoCallback","pre","cols","templateDeleteButton","DT_RowId","bt_ToolTipDelete","template","additionalClass","header","selectMetaData","newTemplate","drowSelectGroup","sTableId","transition","which","endEditInput","deleteRow","addNewRow","cbOnDrop","priorityWasChanged","priorityData","ruleId","oldPriority","parseInt","newPriority","rowIndex","isNaN","api","$el","idTable","random","rowTemplate","before","tableId","selestGroup","tableDnD","onDrop","onDragClass","dragHandle","substr","onSuccess","recordId","notEmpty","successTest","Object","keys","rowId","onFailure","message","UserMessage","showMultiString","onError","errorMessage","applyConfigurationChanges","changeStatus","Config","pbxUrl","result","cbBeforeSendForm","cbAfterSendForm","Form","module_export_recordsConnected","module_export_recordsDisconnected","module_export_recordsUpdateStatus","ready"],"mappings":"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","sourcesContent":["/*\n * Copyright (C) MIKO LLC - All Rights Reserved\n * Unauthorized copying of this file, via any medium is strictly prohibited\n * Proprietary and confidential\n * Written by Nikolay Beketov, 11 2018\n *\n */\nconst idUrl     = 'module-extended-c-d-rs';\nconst idForm    = 'module-extended-cdr-form';\nconst className = 'ModuleExtendedCDRs';\nconst inputClassName = 'mikopbx-module-input';\nlet listenedIDs = [];\n\n/* global globalRootUrl, globalTranslate, Form, Config, $ */\nconst ModuleExtendedCDRs = {\n\t$formObj: $('#'+idForm),\n\t$checkBoxes: $('#'+idForm+' .ui.checkbox'),\n\t$dropDowns: $('#'+idForm+' .ui.dropdown'),\n\tsaveTableAJAXUrl: globalRootUrl + idUrl + \"/saveTableData\",\n\tdeleteRecordAJAXUrl: globalRootUrl + idUrl + \"/delete\",\n\t$disabilityFields: $('#'+idForm+'  .disability'),\n\t$statusToggle: $('#module-status-toggle'),\n\t$moduleStatus: $('#status'),\n\n\t/**\n\t * The call detail records table element.\n\t * @type {jQuery}\n\t */\n\t$cdrTable: $('#CallDetails-table'),\n\t$outgoingEmployeeCalls: $('#OutgoingEmployeeCalls-table'),\n\n\t/**\n\t * The global search input element.\n\t * @type {jQuery}\n\t */\n\t$globalSearch: $('#globalsearch'),\n\n\t/**\n\t * The date range selector element.\n\t * @type {jQuery}\n\t */\n\t$dateRangeSelector: $('#date-range-selector'),\n\n\t/**\n\t * The data table object.\n\t * @type {Object}\n\t */\n\tdataTable: {},\n\n\t/**\n\t * An array of players.\n\t * @type {Array}\n\t */\n\tplayers: [],\n\n\t/**\n\t * Field validation rules\n\t * https://semantic-ui.com/behaviors/form.html\n\t */\n\tvalidateRules: {\n\t},\n\t/**\n\t * Field validation rules\n\t * https://semantic-ui.com/behaviors/form.html\n\t */\n\tvalidateVariantRules: {\n\t\ttitle: {\n\t\t\tidentifier: 'title',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype   : 'empty',\n\t\t\t\t\tprompt : globalTranslate.repModuleExtendedCDRs_Form_titleReportError\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\tminBillSec: {\n\t\t\tidentifier: 'minBillSec',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype   : 'integer[0..1000]',\n\t\t\t\t\tprompt : globalTranslate.repModuleExtendedCDRs_Form_titleReportError\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\tdateMonth: {\n\t\t\tidentifier: 'dateMonth',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype   : 'integer[1..31]',\n\t\t\t\t\tprompt : globalTranslate.repModuleExtendedCDRs_Form_DateMonthError\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\tday: {\n\t\t\tidentifier: 'day',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype   : 'regExp[/^((([1-7])(,[1-7])*)|(([1-7])-([1-7])(/([1-7]))?)|(\\\\*\\\\/[1-7]))$/]',\n\t\t\t\t\tprompt : globalTranslate.repModuleExtendedCDRs_Form_DayError\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\ttime: {\n\t\t\tidentifier: 'time',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype   : 'regExp[/^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])$/]',\n\t\t\t\t\tprompt : globalTranslate.repModuleExtendedCDRs_Form_TimeError\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\temail: {\n\t\t\tidentifier: 'email',\n\t\t\trules: [\n\t\t\t\t{\n\t\t\t\t\ttype   : 'regExp[/^\\\\s*([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,})(\\\\s+[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,})*\\\\s*$/]',\n\t\t\t\t\tprompt : globalTranslate.repModuleExtendedCDRs_Form_EmailError\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t},\n\t/**\n\t * On page load we init some Semantic UI library\n\t */\n\tinitialize() {\n\t\t//////\n\t\t//   .\n\t\t$('#main-content-container').removeClass('container');\n\t\t$('#module-status-toggle-segment').hide();\n\t\t$('.ui.clearing.hidden.divider').remove();\n\t\t$(\"h1.header i.puzzle.icon\")\n\t\t\t.removeClass('puzzle')\n\t\t\t.addClass('th')\n\t\t\t.css('cursor', 'pointer')\n\t\t\t.popup({\n\t\t\t\tinline     : true,\n\t\t\t\tpopup: $('#menu-reports'),\n\t\t\t\ttarget   : \"h1.ui.header\",\n\t\t\t\tposition: 'bottom left',\n\t\t\t\thoverable: true,\n\t\t\t\tdelay: {\n\t\t\t\t\tshow: 300,\n\t\t\t\t\thide: 800\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t\t$('#content-frame').css('display', 'none');\n\t\t//    \n\t\t//////\n\t\tModuleExtendedCDRs.changeReportVariant();\n\t\tModuleExtendedCDRs.initializeDateRangeSelector();\n\n\t\t//     \n\t\twindow[className].$checkBoxes.checkbox();\n\t\twindow[className].$dropDowns.dropdown({onChange: ModuleExtendedCDRs.applyFilter});\n\t\twindow.addEventListener('ModuleStatusChanged', window[className].checkStatusToggle);\n\n\t\twindow[className].initializeForm();\n\t\t$('.menu .item').tab();\n\n\t\t$(document).on('click', '#menu-reports i.edit', function(e) {\n\t\t\te.stopPropagation();\n\t\t\tlet parent =$(this).parent();\n\t\t\t$(e.target).parents('div.six.wide.column').children('h4').hide();\n\t\t\t$(e.target).parents('div.six.wide.column').children('div').hide();\n\n\t\t\tlet reportId = $(this).parent().attr('data-report-id');\n\t\t\tlet form = $(`form[data-report-id=\"${reportId}\"]`);\n\t\t\tform.show();\n\n\t\t\tform.form('set value', 'reportNameID', reportId);\n\t\t\tform.form('set value', 'variantId', parent.attr('data-variant-id'));\n\n\t\t\tform.form('set value', 'title', parent.find('div.content div.title').text().trim());\n\t\t\tform.form('set value', 'minBillSec', parent.attr('data-min-bill-sec'));\n\t\t\tform.form('set value', 'sendingScheduledReport', parent.attr('data-sending-scheduled-report') === '1');\n\t\t\tform.form('set value', 'dateMonth', parent.attr('data-date-month'));\n\t\t\tform.form('set value', 'day', parent.attr('data-day'));\n\t\t\tform.form('set value', 'time', parent.attr('data-time'));\n\t\t\tform.form('set value', 'email', parent.attr('data-email'));\n\t\t});\n\t\t$(document).on('click', '#menu-reports form button[data-action=\"save\"]', function(e) {\n\t\t\te.stopPropagation();\n\t\t\tlet form = $(this).parent();\n\t\t\tform.form({fields: ModuleExtendedCDRs.validateVariantRules});\n\n\t\t\tlet reportNameID  = form.form('get value', 'reportNameID');\n\t\t\tlet variantId     = form.form('get value', 'variantId');\n\t\t\tlet title         = form.form('get value', 'title').trim();\n\t\t\tlet minBillSec    = form.form('get value', 'minBillSec');\n\t\t\tlet sendingReport = form.form('get value', 'sendingScheduledReport') ? 1 : 0;\n\t\t\tlet dateMonth     = form.form('get value', 'dateMonth');\n\t\t\tlet day           = form.form('get value', 'day');\n\t\t\tlet time          = form.form('get value', 'time');\n\t\t\tlet email         = form.form('get value', 'email');\n\n\t\t\tif (!form.form('is valid', 'title')) {\n\t\t\t\tform.form('submit');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!form.form('is valid', 'minBillSec')) {\n\t\t\t\tform.form('submit');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (dateMonth && !form.form('is valid', 'dateMonth')) {\n\t\t\t\tform.form('submit');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (day && !form.form('is valid', 'day')) {\n\t\t\t\tform.form('submit');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (time && !form.form('is valid', 'time')) {\n\t\t\t\tform.form('submit');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (email && !form.form('is valid', 'email')) {\n\t\t\t\tform.form('submit');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet parent = $(`a[data-variant-id=\"${variantId}\"][data-report-id=\"${reportNameID}\"]`);\n\t\t\tparent.find('div.content div.title').text(title);\n\t\t\tparent.attr({\n\t\t\t\t'data-min-bill-sec': minBillSec,\n\t\t\t\t'data-sending-scheduled-report': sendingReport,\n\t\t\t\t'data-date-month': dateMonth,\n\t\t\t\t'data-day': day,\n\t\t\t\t'data-time': time,\n\t\t\t\t'data-email': email\n\t\t\t});\n\n\t\t\tlet contentDiv = parent.find('div.content');\n\t\t\tcontentDiv.find('div.input').hide();\n\t\t\tcontentDiv.find('div.title').show();\n\t\t\tparent.find('i.star').show();\n\t\t\tform.hide();\n\n\t\t\t$(e.target).parents('div.six.wide.column').children('h4').show();\n\t\t\t$(e.target).parents('div.six.wide.column').children('div').show();\n\n\t\t\tModuleExtendedCDRs.changeReportVariant(reportNameID, variantId);\n\t\t\tModuleExtendedCDRs.saveSearchSettings();\n\t\t\tModuleExtendedCDRs.applyFilter();\n\t\t});\n\t\t$('#menu-reports i.copy').on('click', function (e) {\n\t\t\te.stopPropagation();\n\t\t\tlet reportId = $(this).parent().attr('id');\n\t\t\tlet timestamp = Date.now();\n\t\t\tlet parentTitle = $(this).parent().find('div.content').text().trim();\n\t\t\tlet html = `<i class=\"small star outline yellow icon\" style=\"display: none;padding-top: 3px\"></i>\n<i class=\"small edit outline icon\" style=\"padding-top: 3px\"></i>\n<i class=\"small trash alternate outline outline red icon\" style=\"padding-top: 3px\"></i>\n<div class=\"content\">\n\t<div class=\"title\">${parentTitle} (${timestamp})</div>\n\t<div class=\"ui mini input fluid hidden\" style=\"display: none;\">\n\t  <input type=\"text\" value=\"${parentTitle} (${timestamp})\">\n\t</div>\n</div>`;\n\t\t\tlet newItem = $('<a>', {\n\t\t\t\tclass: 'item',\n\t\t\t\thtml: html,\n\t\t\t\t'data-report-id': reportId,\n\t\t\t\t'data-is-main': '0',\n\t\t\t\t'data-min-bill-sec': $(this).parent().attr('data-min-bill-sec'),\n\t\t\t\t'data-search-text': $(this).parent().attr('data-search-text'),\n\t\t\t\t'data-variant-id': timestamp\n\t\t\t});\n\t\t\t$(this).parent().siblings('.ui.link.list').append(newItem);\n\t\t\t$(`a[data-variant-id=\"${timestamp}\"][data-report-id=\"${reportId}\"] i.edit`).trigger('click');\n\t\t});\n\t\t$('#menu-reports i.star').on('click', function (e) {\n\t\t\te.stopPropagation();\n\t\t\tlet reportNameID = $(this).parent().attr('id');\n\t\t\tif(reportNameID === undefined){\n\t\t\t\treportNameID = $(this).parent().attr('data-report-id');\n\t\t\t}\n\t\t\tlet variantId = $(this).parent().attr('data-variant-id');\n\n\t\t\tlet self = $(this);\n\t\t\t$.ajax({\n\t\t\t\turl: `${globalRootUrl}${idUrl}/saveMainVariantReport`,\n\t\t\t\ttype: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\n\t\t\t\t\t'X-Requested-With': 'XMLHttpRequest',\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\t'reportNameID': reportNameID,\n\t\t\t\t\t'variantId': \tvariantId\n\t\t\t\t},\n\t\t\t\tsuccess: function(response) {\n\t\t\t\t\t$('#menu-reports i.star').addClass('outline');\n\t\t\t\t\tself.removeClass('outline');\n\t\t\t\t},\n\t\t\t\terror: function(xhr, status, error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\n\t\t$(document).on('click', '#menu-reports i.trash', function(e) {\n\t\t\te.stopPropagation();\n\t\t\tlet reportNameID = $(this).parent().attr('data-report-id');\n\t\t\tlet variantId \t = $(this).parent().attr('data-variant-id');\n\t\t\tlet self = $(this);\n\t\t\t$.ajax({\n\t\t\t\turl: `${globalRootUrl}${idUrl}/removeVariantReport`,\n\t\t\t\ttype: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\n\t\t\t\t\t'X-Requested-With': 'XMLHttpRequest',\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\t'reportNameID': reportNameID,\n\t\t\t\t\t'variantId': \tvariantId\n\t\t\t\t},\n\t\t\t\tsuccess: function(response) {\n\t\t\t\t\tself.parent().remove();\n\t\t\t\t},\n\t\t\t\terror: function(xhr, status, error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\t\t$('#typeCall.menu a.item').on('click', function (e) {\n\t\t\tModuleExtendedCDRs.applyFilter();\n\t\t});\n\t\t$('#createExcelButton').on('click', function (e) {\n\t\t\tModuleExtendedCDRs.startCreateExcelPDF('xlsx');\n\t\t});\n\t\t$('#createPdfButton').on('click', function (e) {\n\t\t\tModuleExtendedCDRs.startCreateExcelPDF('pdf');\n\t\t});\n\t\t$('#downloadRecords').on('click', function (e) {\n\t\t\tconst encodedSearch = encodeURIComponent(ModuleExtendedCDRs.getSearchText());\n\t\t\tconst url = `${window.location.origin}/pbxcore/api/modules/${className}/downloads?search=${encodedSearch}`;\n\t\t\twindow.open(url, '_blank');\n\t\t});\n\t\t$('#saveSearchSettings').on('click', function (e) {\n\t\t\tModuleExtendedCDRs.saveSearchSettings();\n\t\t});\n\t\t$(\"div.column h4\").on('click', function (e) {\n\t\t\tlet reportId = $(this).attr('id');\n\t\t\t$(\"h1.header i.th.icon\").popup('hide');\n\t\t\tModuleExtendedCDRs.changeReportVariant(reportId);\n\t\t\tModuleExtendedCDRs.applyFilter();\n\t\t});\n\t\t$(document).on('click', 'div.column div.link.list a.item div.title', function(e) {\n\t\t\tlet reportId = $(e.target).closest('a').attr('data-report-id');\n\t\t\tlet variantId = $(e.target).closest('a').attr('data-variant-id');\n\t\t\t$(\"h1.header i.th.icon\").popup('hide');\n\t\t\tModuleExtendedCDRs.changeReportVariant(reportId, variantId);\n\t\t\tModuleExtendedCDRs.applyFilter();\n\t\t});\n\n\t\tModuleExtendedCDRs.$globalSearch.on('keyup', (e) => {\n\t\t\tif (e.keyCode === 13\n\t\t\t\t|| e.keyCode === 8\n\t\t\t\t|| ModuleExtendedCDRs.$globalSearch.val().length === 0) {\n\t\t\t\tModuleExtendedCDRs.applyFilter();\n\t\t\t}\n\t\t});\n\n\t\tModuleExtendedCDRs.$formObj.keydown(function(event){\n\t\t\tif(event.keyCode === 13) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\tModuleExtendedCDRs.$outgoingEmployeeCalls.dataTable({\n\t\t\tsearch: {\n\t\t\t\tsearch: ModuleExtendedCDRs.getSearchText(),\n\t\t\t},\n\t\t\tserverSide: true,\n\t\t\tprocessing: true,\n\t\t\tinfo: false,\n\t\t\tcolumnDefs: [\n\t\t\t\t{ defaultContent: \"\",  targets: \"_all\"},\n\t\t\t],\n\t\t\tajax: {\n\t\t\t\turl: `${globalRootUrl}${idUrl}/getOutgoingEmployeeCalls`,\n\t\t\t\ttype: 'POST'\n\t\t\t},\n\t\t\tpaging: true,\n\t\t\tsDom: 'rtip',\n\t\t\tdeferRender: true,\n\t\t\tpageLength: ModuleExtendedCDRs.calculatePageLength(),\n\n\t\t\t/**\n\t\t\t * Constructs the CDR row.\n\t\t\t * @param {HTMLElement} row - The row element.\n\t\t\t * @param {Array} data - The row data.\n\t\t\t */\n\t\t\tcreatedRow(row, data) {\n\t\t\t\t$('td', row).eq(0).html(data.callerId);\n\t\t\t\t$('td', row).eq(1).html(data.number).addClass('active');\n\t\t\t\t$('td', row).eq(2).html(data.billHourCalls);\n\t\t\t\t$('td', row).eq(3).html(data.billMinCalls);\n\t\t\t\t$('td', row).eq(4).html(data.billSecCalls);\n\t\t\t\t$('td', row).eq(5).html(data.countCalls);\n\t\t\t},\n\t\t\tdrawCallback(settings) {\n\t\t\t\tlet pagination = $(this).closest('.dataTables_wrapper').find('.dataTables_paginate');\n\t\t\t\tif (settings._iDisplayLength >= settings.fnRecordsDisplay()) {\n\t\t\t\t\tpagination.hide();\n\t\t\t\t} else {\n\t\t\t\t\tpagination.show();\n\t\t\t\t}\n\t\t\t},\n\t\t\tlanguage: SemanticLocalization.dataTableLocalisation,\n\t\t\tordering: false,\n\t\t});\n\n\t\tModuleExtendedCDRs.$cdrTable.dataTable({\n\t\t\tsearch: {\n\t\t\t\tsearch: ModuleExtendedCDRs.getSearchText(),\n\t\t\t},\n\t\t\tserverSide: true,\n\t\t\tprocessing: true,\n\t\t\tinfo: false,\n\t\t\tcolumnDefs: [\n\t\t\t\t{defaultContent: \"-\", targets: \"_all\"},\n\t\t\t],\n\t\t\tajax: {\n\t\t\t\turl: `${globalRootUrl}${idUrl}/getHistory`,\n\t\t\t\ttype: 'POST',\n\t\t\t\tdataSrc: function(json) {\n\t\t\t\t\t$('a.item[data-tab=\"all-calls\"] b').html(': '+json.recordsFiltered)\n\t\t\t\t\t$('a.item[data-tab=\"incoming-calls\"] b').html(': '+json.recordsIncoming)\n\t\t\t\t\t$('a.item[data-tab=\"missed-calls\"] b').html(': '+json.recordsMissed)\n\t\t\t\t\t$('a.item[data-tab=\"outgoing-calls\"] b').html(': '+json.recordsOutgoing)\n\n\t\t\t\t\tlet typeCall = $('#typeCall a.item.active').attr('data-tab');\n\t\t\t\t\tif(typeCall === 'incoming-calls'){\n\t\t\t\t\t\tjson.recordsFiltered = json.recordsIncoming;\n\t\t\t\t\t}else if(typeCall === 'missed-calls'){\n\t\t\t\t\t\tjson.recordsFiltered = json.recordsMissed;\n\t\t\t\t\t}else if(typeCall === 'outgoing-calls'){\n\t\t\t\t\t\tjson.recordsFiltered = json.recordsOutgoing;\n\t\t\t\t\t}\n\t\t\t\t\treturn json.data;\n\t\t\t\t}\n\t\t\t},\n\t\t\tpaging: true,\n\t\t\tsDom: 'rtip',\n\t\t\tdeferRender: true,\n\t\t\tstripeClasses: ['striped'],\n\t\t\tpageLength: ModuleExtendedCDRs.calculatePageLength(),\n\n\t\t\t/**\n\t\t\t * Constructs the CDR row.\n\t\t\t * @param {HTMLElement} row - The row element.\n\t\t\t * @param {Array} data - The row data.\n\t\t\t */\n\t\t\tcreatedRow(row, data) {\n\t\t\t\tlet detailedIcon = '';\n\t\t\t\tif (data.DT_RowClass.indexOf(\"detailed\") >= 0) {\n\t\t\t\t\tdetailedIcon = '<i class=\"icon caret down\"></i>';\n\t\t\t\t}\n\t\t\t\tdata.typeCall = `${data.typeCall}`;\n\t\t\t\tif(data.typeCall === '1'){\n\t\t\t\t\t$('td', row).eq(0).html('<i class=\"custom-outgoing-icon-15x15\"></i>'+detailedIcon);\n\t\t\t\t}else if(data.typeCall === '2'){\n\t\t\t\t\t$('td', row).eq(0).html('<i class=\"custom-incoming-icon-15x15\"></i>'+detailedIcon);\n\t\t\t\t}else if(data.typeCall === '3'){\n\t\t\t\t\t$('td', row).eq(0).html('<i class=\"custom-missed-icon-15x15\"></i>'+detailedIcon);\n\t\t\t\t}else{\n\t\t\t\t\t$('td', row).eq(0).html(''+detailedIcon);\n\t\t\t\t}\n\n\t\t\t\t$('td', row).eq(1).html(data[0]).addClass('right aligned');\n\t\t\t\t$('td', row).eq(2)\n\t\t\t\t\t.html(data[1])\n\t\t\t\t\t.attr('data-phone',data[1])\n\t\t\t\t\t.addClass('need-update').addClass('right aligned');\n\t\t\t\t$('td', row).eq(3)\n\t\t\t\t\t.html(data[2])\n\t\t\t\t\t.attr('data-phone',data[2])\n\t\t\t\t\t.addClass('need-update');\n\n\t\t\t\tlet duration = data[3];\n\t\t\t\tif (data.ids !== '') {\n\t\t\t\t\tduration += '<i data-ids=\"' + data.ids + '\" class=\"file alternate outline icon\">';\n\t\t\t\t}\n\n\t\t\t\tlet lineText = data.line;\n\t\t\t\tif(data.did !== \"\"){\n\t\t\t\t\tlineText = `${data.line} <a class=\"ui mini basic label\">${data.did}</a>`;\n\t\t\t\t}\n\t\t\t\t$('td', row).eq(4).html(lineText).addClass('right aligned');\n\n\t\t\t\t$('td', row).eq(5).html(data.waitTime).addClass('right aligned');\n\t\t\t\t$('td', row).eq(6).html(duration).addClass('right aligned');\n\t\t\t\t$('td', row).eq(7).html(data.stateCall).addClass('right aligned');\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Draw event - fired once the table has completed a draw.\n\t\t\t */\n\t\t\tdrawCallback(settings) {\n\t\t\t\tExtensions.updatePhonesRepresent('need-update');\n\t\t\t\tlistenedIDs.forEach(function(id) {\n\t\t\t\t\tlet element = $(`[id=\"${id}\"]`);\n\t\t\t\t\tif (element.length) {\n\t\t\t\t\t\telement.removeClass('warning').addClass('positive');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet pagination = $(this).closest('.dataTables_wrapper').find('.dataTables_paginate');\n\t\t\t\tif (settings._iDisplayLength >= settings.fnRecordsDisplay()) {\n\t\t\t\t\tpagination.hide();\n\t\t\t\t} else {\n\t\t\t\t\tpagination.show();\n\t\t\t\t}\n\t\t\t},\n\t\t\tlanguage: SemanticLocalization.dataTableLocalisation,\n\t\t\tordering: false,\n\t\t});\n\t\tModuleExtendedCDRs.dataTable = ModuleExtendedCDRs.$cdrTable.DataTable();\n\t\tModuleExtendedCDRs.dataTable.on('draw', () => {\n\t\t\tModuleExtendedCDRs.$globalSearch.closest('div').removeClass('loading');\n\t\t});\n\t\tModuleExtendedCDRs.$cdrTable.on('click', 'tr.negative', (e) => {\n\t\t\t// let filter = $(e.target).attr('data-phone');\n\t\t\t// if (filter !== undefined && filter !== '') {\n\t\t\t// \tModuleExtendedCDRs.$globalSearch.val(filter)\n\t\t\t// \tModuleExtendedCDRs.applyFilter();\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\tlet ids = $(e.target).attr('data-ids');\n\t\t\tif (ids !== undefined && ids !== '') {\n\t\t\t\twindow.location = `${globalRootUrl}system-diagnostic/index/?filename=asterisk/verbose&filter=${ids}`;\n\t\t\t}\n\t\t});\n\t\t// Add event listener for opening and closing details\n\t\tModuleExtendedCDRs.$cdrTable.on('click', 'tr.detailed', (e) => {\n\t\t\tlet ids = $(e.target).attr('data-ids');\n\t\t\tif (ids !== undefined && ids !== '') {\n\t\t\t\twindow.location = `${globalRootUrl}system-diagnostic/index/?filename=asterisk/verbose&filter=${ids}`;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// let filter = $(e.target).attr('data-phone');\n\t\t\t// if (filter !== undefined && filter !== '') {\n\t\t\t// \tModuleExtendedCDRs.$globalSearch.val(filter)\n\t\t\t// \tModuleExtendedCDRs.applyFilter();\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\tconst tr = $(e.target).closest('tr');\n\t\t\tconst row = ModuleExtendedCDRs.dataTable.row(tr);\n\t\t\tif(row.length === 0){\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (tr.hasClass('shown')) {\n\t\t\t\t// This row is already open - close it\n\t\t\t\t$('tr[data-row-id=\"'+tr.attr('id')+'-detailed\"').remove();\n\t\t\t\ttr.removeClass('shown');\n\t\t\t} else {\n\t\t\t\t// Open this row\n\t\t\t\ttr.after(ModuleExtendedCDRs.showRecords(row.data() , tr.attr('id')));\n\t\t\t\ttr.addClass('shown');\n\t\t\t\t$('tr[data-row-id=\"'+tr.attr('id')+'-detailed\"').each((index, playerRow) => {\n\t\t\t\t\tconst id = $(playerRow).attr('id');\n\t\t\t\t\treturn new CDRPlayer(id);\n\t\t\t\t});\n\t\t\t\tExtensions.updatePhonesRepresent('need-update');\n\n\t\t\t\tlistenedIDs.forEach(function(id) {\n\t\t\t\t\tlet element = $(`[id=\"${id}\"]`);\n\t\t\t\t\tif (element.length) {\n\t\t\t\t\t\telement.removeClass('warning').addClass('positive');\n\t\t\t\t\t}\n\t\t\t\t\telement = $(`[data-row-id=\"${id}\"]`);\n\t\t\t\t\tif (element.length) {\n\t\t\t\t\t\telement.removeClass('warning').addClass('positive');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tModuleExtendedCDRs.updateSettings();\n\t\tModuleExtendedCDRs.applyFilter();\n\n\t\twindow[className].updateSyncState();\n\t\tsetInterval(window[className].updateSyncState, 5000);\n\t},\n\tchangeReportVariant(reportNameID = '', currentVariantId=''){\n\t\tif(reportNameID === ''){\n\t\t\treportNameID = $('#currentReportNameID').val();\n\t\t\tcurrentVariantId = $('#currentVariantId').val();\n\t\t}\n\n\t\t$(\"[id$='_paginate']\").hide();\n\t\t$(`table[data-report-name!=\"\"]`).hide();\n\t\t$(`table[data-report-name=\"${reportNameID}\"]`).css('width', '').show();\n\t\t$(`#${reportNameID}-table_paginate`).show();\n\n\t\tif(reportNameID === 'CallDetails' && ModuleExtendedCDRs.dataTable.page !== undefined){\n\t\t\tModuleExtendedCDRs.dataTable.page.len(ModuleExtendedCDRs.calculatePageLength()).draw();\n\t\t}\n\n\t\t$('#currentReportNameID').val(reportNameID);\n\t\t$('#currentVariantId').val(currentVariantId);\n\n\t\tlet variantName = '';\n\t\tif(currentVariantId !==''){\n\t\t\tvariantName = $(`a[data-variant-id=\"${currentVariantId}\"][data-report-id=\"${reportNameID}\"] div.title`).text().trim();\n\t\t}else{\n\t\t\tvariantName = $(`h4#${reportNameID} div.content`).text().trim();\n\t\t}\n\t\t$(\"h1.header div.content\").contents().filter(function() {\n\t\t\treturn this.nodeType === 3 && this.nodeValue.trim() !== '';\n\t\t}).each(function() {\n\t\t\tthis.nodeValue = variantName;\n\t\t});\n\n\t\tModuleExtendedCDRs.updateSettings();\n\t},\n\tupdateSettings(){\n\t\tlet currentVariantId = $('#currentVariantId').val();\n\t\tlet reportNameID = $('#currentReportNameID').val();\n\t\tlet settings = {};\n\t\tif(currentVariantId === ''){\n\t\t\tsettings = JSON.parse(decodeURIComponent($(`#${reportNameID}`).attr('data-search-text')));\n\t\t}else{\n\t\t\tsettings = JSON.parse(decodeURIComponent($(`a[data-variant-id=\"${currentVariantId}\"][data-report-id=\"${reportNameID}\"]`).attr('data-search-text')));\n\t\t}\n\t\tif(settings.dateRangeSelector !== undefined && settings.dateRangeSelector !== ''){\n\t\t\tlet periods = ModuleExtendedCDRs.getStandardPeriods();\n\t\t\tlet defPeriod = [moment(),moment()];\n\t\t\tif(periods[settings.dateRangeSelector] !== undefined){\n\t\t\t\tdefPeriod = periods[settings.dateRangeSelector];\n\t\t\t}\n\t\t\tModuleExtendedCDRs.$dateRangeSelector.attr('data-start', defPeriod[0].format('YYYY/MM/DD'));\n\t\t\tModuleExtendedCDRs.$dateRangeSelector.attr('data-end', moment(defPeriod[1].format('YYYYMMDD')).endOf('day').format('YYYY/MM/DD'));\n\t\t\tModuleExtendedCDRs.$dateRangeSelector.val(`${defPeriod[0].format('DD/MM/YYYY')} - ${defPeriod[1].format('DD/MM/YYYY') }`);\n\t\t}\n\t\tif(settings.globalSearch !== undefined) {\n\t\t\tModuleExtendedCDRs.$globalSearch.val(settings.globalSearch)\n\t\t}\n\n\t\t$('#additionalFilter').dropdown('clear');\n\t\tif(settings.additionalFilter !== undefined){\n\t\t\t$('#additionalFilter').dropdown('set selected', settings.additionalFilter.split(' '));\n\t\t}\n\t\tif(settings.typeCall !== undefined){\n\t\t\t$('#typeCall.menu a.item').tab('change tab', settings.typeCall)\n\t\t}else{\n\t\t\t$('#typeCall.menu a.item').tab('change tab', 'all-calls')\n\t\t}\n\t},\n\t/**\n\t *\n\t */\n\tupdateSyncState(){\n\t\t//  GET-\n\t\tlet divProgress = $(\"#sync-progress\");\n\t\t$.ajax({\n\t\t\turl: `${globalRootUrl}${idUrl}/getState`,\n\t\t\tmethod: 'GET',\n\t\t\tsuccess: function(response) {\n\t\t\t\tif(response.stateData.lastId - response.stateData.nowId > 0){\n\t\t\t\t\tdivProgress.show();\n\t\t\t\t}else{\n\t\t\t\t\tdivProgress.hide();\n\t\t\t\t}\n\t\t\t\tdivProgress.progress({\n\t\t\t\t\ttotal: response.stateData.lastId, value: response.stateData.nowId,\n\t\t\t\t\ttext: {\n\t\t\t\t\t\tactive  : globalTranslate.repModuleExtendedCDRs_syncState\n\t\t\t\t\t},\n\t\t\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t\t\t\t//  \n\t\t\t\t\t\tconsole.error(' :', textStatus, errorThrown);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Shows a set of call records when a row is clicked.\n\t * @param {Array} data - The row data.\n\t * @returns {string} The HTML representation of the call records.\n\t */\n\tshowRecords(data, id) {\n\t\tlet htmlPlayer = '';\n\t\tdata[4].forEach((record, i) => {\n\t\t\tlet srcAudio = '';\n\t\t\tlet srcDownloadAudio = '';\n\t\t\tif (!(record.recordingfile === undefined || record.recordingfile === null || record.recordingfile.length === 0)) {\n\t\t\t\tlet recordFileName = encodeURIComponent(record.prettyFilename);\n\t\t\t\tconst recordFileUri = encodeURIComponent(record.recordingfile);\n\t\t\t\tsrcAudio = `/pbxcore/api/cdr/v2/playback?view=${recordFileUri}`;\n\t\t\t\tsrcDownloadAudio = `/pbxcore/api/cdr/v2/playback?view=${recordFileUri}&download=1&filename=${recordFileName}.mp3`;\n\t\t\t}\n\n\t\t\thtmlPlayer +=`\n\t\t\t<tr id=\"${record.id}\" data-row-id=\"${id}-detailed\" class=\"warning detailed odd shown\" role=\"row\">\n\t\t\t\t<td></td>\n\t\t\t\t<td class=\"right aligned\">${record.start}</td>\n\t\t\t\t<td data-phone=\"${record.src_num}\" class=\"right aligned need-update\">${record.src_num}</td>\n\t\t\t   \t<td data-phone=\"${record.dst_num}\" class=\"left aligned need-update\">${record.dst_num}</td>\n\t\t\t\t<td class=\"right aligned\">\t\t\t\n\t\t\t\t</td>\n\t\t\t\t<td class=\"right aligned\">${record.waitTime}</td>\n\t\t\t\t<td class=\"right aligned\">\n\t\t\t\t\t<i class=\"ui icon play\"></i>\n\t\t\t\t\t<audio preload=\"metadata\" id=\"audio-player-${record.id}\" src=\"${srcAudio}\" onplay=\"ModuleExtendedCDRs.audioPlayHandler(event)\"></audio>\n\t\t\t\t\t${record.billsec}\n\t\t\t\t\t<i class=\"ui icon download\" data-value=\"${srcDownloadAudio}\" onclick=\"ModuleExtendedCDRs.audioPlayHandler(event)\"></i>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"right aligned\" data-state-index=\"${record.stateCallIndex}\">${record.stateCall}</td>\n\t\t\t</tr>`\n\t\t});\n\t\treturn htmlPlayer;\n\t},\n\taudioPlayHandler(event) {\n\t\tlet detailRow = $(event.target).closest('tr');\n\t\tdetailRow.removeClass('warning');\n\t\tdetailRow.addClass('positive');\n\n\t\tlet callIdDetail = detailRow.attr('data-row-id');\n\t\tlistenedIDs.push(callIdDetail);\n\n\t\tlet callId = callIdDetail.replace('-detailed', '');\n\n\t\tlet allPositive = true;\n\t\t$('[data-row-id=\"' + callIdDetail + '\"]').each(function() {\n\t\t\tif (!$(this).hasClass('positive')) {\n\t\t\t\tallPositive = false;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\n\t\tif (allPositive) {\n\t\t\t$(`[id=\"${callId}\"]`).addClass('positive');\n\t\t\tlistenedIDs.push(callId);\n\t\t}\n\n\t\tlistenedIDs = [...new Set(listenedIDs)];\n\t},\n\tcalculatePageLength() {\n\t\t// Calculate row height\n\t\tlet rowHeight = ModuleExtendedCDRs.$cdrTable.find('tbody > tr').first().outerHeight();\n\n\t\t// Calculate window height and available space for table\n\t\tconst windowHeight = window.innerHeight;\n\t\tconst headerFooterHeight = 400 ; // Estimate height for header, footer, and other elements\n\n\t\t// Calculate new page length\n\t\treturn Math.max(Math.floor((windowHeight - headerFooterHeight) / rowHeight), 5);\n\t},\n\n\n\tadditionalExportFunctions(){\n\t\tlet body = $('body');\n\t\tbody.on('click', '#add-new-button', function (e) {\n\t\t\tlet id = 'none-'+Date.now();\n\t\t\tlet newRow \t= $('<tr>').attr('id', id);\n\t\t\tlet nameCell = $('<td>').attr('data-label', 'name').addClass('right aligned').html('<div class=\"ui mini icon input\"><input type=\"text\" placeholder=\"\" value=\"\"></div>');\n\t\t\tlet usersCell \t= $('<td>').attr('data-label', 'users').html('<div class=\"ui multiple dropdown\">' + $('#users-selector').html() +  '<div>');\n\t\t\tlet buttonsCell\t= $('<td>').attr('data-label', 'buttons').html('<div class=\"ui buttons\">\\n' +\n\t\t\t\t'                  <button class=\"compact ui icon basic button\" data-action=\"settings\" onclick=\"ModuleExtendedCDRs.showRuleOptions(\\''+id+'\\')\">\\n' +\n\t\t\t\t'                    <i class=\"cog icon\"></i>\\n' +\n\t\t\t\t'                  </button>\\n' +\n\t\t\t\t'                  <button class=\"compact ui icon basic button\" data-action=\"remove\" onclick=\"ModuleExtendedCDRs.removeRule(\\''+id+'\\')\">\\n' +\n\t\t\t\t'                    <i class=\"icon trash red\"></i>\\n' +\n\t\t\t\t'                  </button>\\n' +\n\t\t\t\t'                </div>');\n\t\t\tlet headersCell = $('<td>').attr('data-label', 'headers').addClass('right aligned').attr('style', 'display: none').html('<div class=\"ui modal segment\" data-id=\"'+id+'\">\\n' +\n\t\t\t\t'                  <i class=\"close icon\"></i>\\n' +\n\t\t\t\t'                    <div class=\"ui form\">\\n' +\n\t\t\t\t'                      <div class=\"field\">\\n' +\n\t\t\t\t'                        <label>HTTP Headers</label>\\n' +\n\t\t\t\t'                        <textarea></textarea>\\n' +\n\t\t\t\t'                      </div>\\n' +\n\t\t\t\t'                      <div class=\"field\">\\n' +\n\t\t\t\t'                        <label>URL</label>\\n' +\n\t\t\t\t'                        <div class=\"ui icon input\"><input data-label=\"dstUrl\" type=\"text\" placeholder=\"\" value=\"\"></div>\\n' +\n\t\t\t\t'                      </div>\\n' +\n\t\t\t\t'                    </div>\\n' +\n\t\t\t\t'                  <div class=\"actions\">\\n' +\n\t\t\t\t'                    <div class=\"ui positive right labeled icon button\">\\n' +\n\t\t\t\t'                       \\n' +\n\t\t\t\t'                      <i class=\"checkmark icon\"></i>\\n' +\n\t\t\t\t'                    </div>\\n' +\n\t\t\t\t'                  </div>\\n' +\n\t\t\t\t'                </div>');\n\t\t\tnewRow.append(nameCell, usersCell, headersCell, buttonsCell);\n\t\t\t$('#sync-rules').append(newRow);\n\t\t\t$('div.dropdown').dropdown();\n\t\t});\n\n\t\tbody.on('click', '#save-button', function (e) {\n\t\t\t//    \n\t\t\t$(\"input\").each(function(index) {\n\t\t\t\t$(this).attr('value', $(this).val());\n\t\t\t});\n\n\t\t\tlet data = [];\n\t\t\tlet table = $('#sync-rules');\n\t\t\tlet rows = table.find('tbody tr');\n\t\t\trows.each(function() {\n\t\t\t\tlet row = $(this);\n\t\t\t\tlet rowData = {\n\t\t\t\t\tid: row.attr('id'),\n\t\t\t\t\tname:  row.find('td[data-label=\"name\"] input').val(),\n\t\t\t\t\tdstUrl:  $('.ui.modal[data-id=\"'+row.attr('id')+'\"] input[data-label=\"dstUrl\"]').val(),\n\t\t\t\t\tusers:   row.find('td[data-label=\"users\"] div.dropdown').dropdown('get value'),\n\t\t\t\t\theaders: $('.ui.modal[data-id=\"'+row.attr('id')+'\"] textarea').val()\n\t\t\t\t};\n\t\t\t\tdata.push(rowData);\n\t\t\t});\n\t\t\t$.ajax({\n\t\t\t\ttype: \"POST\",\n\t\t\t\turl:  globalRootUrl + idUrl + \"/save\",\n\t\t\t\tdata: {rules: data},\n\t\t\t\tsuccess: function(response) {\n\t\t\t\t\tconsole.log(\" \", response);\n\t\t\t\t\tfor (let key in response.ruleSaveResult) {\n\t\t\t\t\t\tif (response.ruleSaveResult.hasOwnProperty(key)) {\n\t\t\t\t\t\t\tlet syncRules = $('#sync-rules tr#'+key);\n\t\t\t\t\t\t\tlet html = syncRules.html();\n\t\t\t\t\t\t\tsyncRules.html(html.replace((new RegExp(key, \"g\")), response.ruleSaveResult[key]));\n\t\t\t\t\t\t\tsyncRules.attr('id', response.ruleSaveResult[key]);\n\t\t\t\t\t\t\t$('.ui.modal[data-id=\"'+key+'\"]').attr('data-id', response.ruleSaveResult[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\terror: function(xhr, status, error) {\n\t\t\t\t\tconsole.error(\" \", status, error);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\tshowRuleOptions(id) {\n\t\t$('.ui.modal[data-id=\"'+id+'\"]').modal({closable  : true, }).modal('show');\n\t},\n\tremoveRule(id) {\n\t\t$.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl:  globalRootUrl + idUrl + \"/delete\",\n\t\t\tdata: {\n\t\t\t\ttable: 'ExportRules',\n\t\t\t\tid: id\n\t\t\t},\n\t\t\tsuccess: function(response) {\n\t\t\t\tconsole.log(\" \", response);\n\t\t\t\t$('#sync-rules tr#'+id).remove();\n\t\t\t},\n\t\t\terror: function(xhr, status, error) {\n\t\t\t\tconsole.error(\" \", status, error);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Initializes the date range selector.\n\t */\n\tinitializeDateRangeSelector() {\n\n\t\tconst period = ModuleExtendedCDRs.$dateRangeSelector.attr('data-def-value');\n\t\tlet defPeriod = [moment(),moment()];\n\t\tif(period !== '' && period !== undefined){\n\t\t\tlet periods = ModuleExtendedCDRs.getStandardPeriods();\n\t\t\tif(periods[period] !== undefined){\n\t\t\t\tdefPeriod = periods[period];\n\t\t\t}\n\t\t}\n\n\t\tconst options = {};\n\t\toptions.ranges = {\n\t\t\t[globalTranslate.repModuleExtendedCDRs_cdr_cal_Today]: [moment(), moment()],\n\t\t\t[globalTranslate.repModuleExtendedCDRs_cdr_cal_Yesterday]: [moment().subtract(1, 'days'), moment().subtract(1, 'days')],\n\t\t\t[globalTranslate.repModuleExtendedCDRs_cdr_cal_LastWeek]: [moment().subtract(6, 'days'), moment()],\n\t\t\t[globalTranslate.repModuleExtendedCDRs_cdr_cal_Last30Days]: [moment().subtract(29, 'days'), moment()],\n\t\t\t[globalTranslate.repModuleExtendedCDRs_cdr_cal_ThisMonth]: [moment().startOf('month'), moment().endOf('month')],\n\t\t\t[globalTranslate.repModuleExtendedCDRs_cdr_cal_LastMonth]: [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')],\n\t\t};\n\t\toptions.alwaysShowCalendars = true;\n\t\toptions.autoUpdateInput = true;\n\t\toptions.linkedCalendars = true;\n\t\toptions.maxDate = moment().endOf('month');\n\t\toptions.locale = {\n\t\t\tformat: 'DD/MM/YYYY',\n\t\t\tseparator: ' - ',\n\t\t\tapplyLabel: globalTranslate.cal_ApplyBtn,\n\t\t\tcancelLabel: globalTranslate.cal_CancelBtn,\n\t\t\tfromLabel: globalTranslate.cal_from,\n\t\t\ttoLabel: globalTranslate.cal_to,\n\t\t\tcustomRangeLabel: globalTranslate.cal_CustomPeriod,\n\t\t\tdaysOfWeek: SemanticLocalization.calendarText.days,\n\t\t\tmonthNames: SemanticLocalization.calendarText.months,\n\t\t\tfirstDay: 1,\n\t\t};\n\t\toptions.startDate = defPeriod[0];\n\t\toptions.endDate   = defPeriod[1];\n\t\tModuleExtendedCDRs.$dateRangeSelector.daterangepicker(\n\t\t\toptions,\n\t\t\tModuleExtendedCDRs.cbDateRangeSelectorOnSelect,\n\t\t);\n\t},\n\t/**\n\t * Handles the date range selector select event.\n\t * @param {moment.Moment} start - The start date.\n\t * @param {moment.Moment} end - The end date.\n\t * @param {string} label - The label.\n\t */\n\tcbDateRangeSelectorOnSelect(start, end, label) {\n\t\tModuleExtendedCDRs.$dateRangeSelector.attr('data-start', start.format('YYYY/MM/DD'));\n\t\tModuleExtendedCDRs.$dateRangeSelector.attr('data-end', moment(end.format('YYYYMMDD')).endOf('day').format('YYYY/MM/DD'));\n\t\tModuleExtendedCDRs.$dateRangeSelector.val(`${start.format('DD/MM/YYYY')} - ${end.format('DD/MM/YYYY') }`);\n\t\tModuleExtendedCDRs.applyFilter();\n\t},\n\n\t/**\n\t * Applies the filter to the data table.\n\t */\n\tapplyFilter() {\n\t\tconst text  = ModuleExtendedCDRs.getSearchText();\n\t\tlistenedIDs = [];\n\t\tModuleExtendedCDRs.dataTable.search(text).draw();\n\t\tModuleExtendedCDRs.$outgoingEmployeeCalls.DataTable().search(text).draw();\n\n\t\tModuleExtendedCDRs.$globalSearch.closest('div').addClass('loading');\n\t},\n\n\tgetSearchText(retStandardPeriod = false, disableGlobalSearch = false) {\n\t\tlet dateRangeSelector = '';\n\t\tif(retStandardPeriod === true){\n\t\t\tlet periods = ModuleExtendedCDRs.getStandardPeriods();\n\t\t\t$.each(periods,function(index,value){\n\t\t\t\tif(ModuleExtendedCDRs.$dateRangeSelector.val() ===  `${value[0].format('DD/MM/YYYY')} - ${value[1].format('DD/MM/YYYY')}`){\n\t\t\t\t\tdateRangeSelector = index;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tdateRangeSelector = ModuleExtendedCDRs.$dateRangeSelector.val();\n\t\t}\n\n\t\tlet reportNameID = $('#currentReportNameID').val();\n\t\tlet currentVariantId = $('#currentVariantId').val();\n\t\tlet minBilSec = $(`h4#${reportNameID}`).attr('data-min-bill-sec');\n\t\tif(currentVariantId !== ''){\n\t\t\tminBilSec = $(`a[data-report-id=\"${reportNameID}\"][data-variant-id=\"${currentVariantId}\"]`).attr('data-min-bill-sec');\n\t\t}\n\t\tconst filter = {\n\t\t\tdateRangeSelector: dateRangeSelector,\n\t\t\tminBilSec: minBilSec,\n\t\t\tglobalSearch: ModuleExtendedCDRs.$globalSearch.val(),\n\t\t\ttypeCall: $('#typeCall a.item.active').attr('data-tab'),\n\t\t\tadditionalFilter: $('#additionalFilter').dropdown('get value').replace(/,/g,' '),\n\t\t};\n\t\tif(disableGlobalSearch === true){\n\t\t\tfilter.globalSearch = '';\n\t\t}\n\t\treturn JSON.stringify(filter);\n\t},\n\n\tgetStandardPeriods(){\n\t\treturn {\n\t\t\t'cal_Today': [moment(), moment()],\n\t\t\t'cal_Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],\n\t\t\t'cal_LastWeek': [moment().subtract(6, 'days'), moment()],\n\t\t\t'cal_Last30Days': [moment().subtract(29, 'days'), moment()],\n\t\t\t'cal_ThisMonth': [moment().startOf('month'), moment().endOf('month')],\n\t\t\t'cal_LastMonth': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')],\n\t\t}\n\t},\n\n\tsaveSearchSettings() {\n\t\tlet search = ModuleExtendedCDRs.getSearchText(true, true);\n\t\tlet currentVariantId = $('#currentVariantId').val();\n\t\tlet reportId = $('#currentReportNameID').val();\n\t\tlet variantName = '';\n\t\tlet data = {\n\t\t\t'search[value]': search,\n\t\t\t'reportNameID': reportId,\n\t\t\t'variantId': \tcurrentVariantId,\n\t\t\t'variantName': \tvariantName\n\t\t};\n\t\tif(currentVariantId !== ''){\n\t\t\tlet parent = $(`a[data-variant-id=\"${currentVariantId}\"][data-report-id=\"${reportId}\"]`);\n\t\t\tdata.variantName = parent.find('div.title').text().trim();\n\n\t\t\tdata.minBillSec = parent.attr('data-min-bill-sec').trim();\n\t\t\tdata.sendingScheduledReport = parent.attr('data-sending-scheduled-report').trim();\n\t\t\tdata.dateMonth = parent.attr('data-date-month').trim();\n\t\t\tdata.day = parent.attr('data-day').trim();\n\t\t\tdata.time = parent.attr('data-time').trim();\n\t\t\tdata.email = parent.attr('data-email').trim();\n\t\t}\n\n\t\t$.ajax({\n\t\t\turl: `${globalRootUrl}${idUrl}/saveSearchSettings`,\n\t\t\ttype: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',\n\t\t\t\t'X-Requested-With': 'XMLHttpRequest',\n\t\t\t},\n\t\t\tdata: data,\n\t\t\tsuccess: function(response) {\n\t\t\t\tif(currentVariantId === ''){\n\t\t\t\t\t$(`#${$('#currentReportNameID').val()}`).attr('data-search-text', encodeURIComponent(search));\n\t\t\t\t}else{\n\t\t\t\t\t$(`a[data-variant-id=\"${currentVariantId}\"][data-report-id=\"${reportId}\"]`).attr('data-search-text', encodeURIComponent(search));\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(xhr, status, error) {\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t});\n\t},\n\n\tstartCreateExcelPDF(type) {\n\t\tconst reportNameID \t   = $('#currentReportNameID').val();\n\t\tconst currentVariantId = $('#currentVariantId').val();\n\t\tlet title = '';\n\t\tif(currentVariantId === ''){\n\t\t\ttitle= $(`#${$('#currentReportNameID').val()} div.content`).text().trim();\n\t\t}else{\n\t\t\ttitle=$(`a[data-variant-id=\"${currentVariantId}\"][data-report-id=\"${reportNameID}\"] div.title`).text().trim();\n\t\t}\n\n\t\tconst encodedSearch = encodeURIComponent(ModuleExtendedCDRs.getSearchText());\n\t\tconst url = `${window.location.origin}/pbxcore/api/modules/${className}/exportHistory?reportNameID=${reportNameID}&type=${type}&search=${encodedSearch}&title=`+encodeURIComponent(title);\n\t\twindow.open(url, '_blank');\n\t},\n\n\tgetMaxWidth(data, key) {\n\t\t//      \n\t\tlet maxLength = key.length; //    \n\t\tdata.forEach(row => {\n\t\t\tlet length = (row[key] || '').toString().length;\n\t\t\tif (length > maxLength) maxLength = length;\n\t\t});\n\t\treturn maxLength;\n\t},\n\n\tstartDownload(){\n\t\tlet startTime = ModuleExtendedCDRs.$dateRangeSelector.attr('data-start');\n\t\tlet endTime   = ModuleExtendedCDRs.$dateRangeSelector.attr('data-end');\n\t\tif(startTime === undefined){\n\t\t\tstartTime = moment().format('YYYY-MM-DD');\n\t\t\tendTime   =  moment().endOf('day').format('YYYY-MM-DD HH:mm:ss')\n\t\t}\n\t\tlet typeRec = 'inner';\n\t\tif($('#allRecord').checkbox('is checked')){\n\t\t\ttypeRec = 'all';\n\t\t}else if($('#outRecord').checkbox('is checked')){\n\t\t\ttypeRec = 'out';\n\t\t}\n\t\tlet numbers = ModuleExtendedCDRs.$globalSearch.val();\n\t\twindow.open('/pbxcore/api/modules/'+className+'/downloads?start='+startTime+'&end='+endTime+\"&numbers=\"+encodeURIComponent(numbers)+\"&type=\"+typeRec, '_blank');\n\t},\n\n\tstartDownloadHistory(){\n\t\tlet startTime = ModuleExtendedCDRs.$dateRangeSelector.attr('data-start');\n\t\tlet endTime   = ModuleExtendedCDRs.$dateRangeSelector.attr('data-end');\n\t\tif(startTime === undefined){\n\t\t\tstartTime = moment().format('YYYY-MM-DD');\n\t\t\tendTime =  moment().endOf('day').format('YYYY-MM-DD HH:mm:ss')\n\t\t}\n\t\tlet typeRec = 'inner';\n\t\tif($('#allRecord').checkbox('is checked')){\n\t\t\ttypeRec = 'all';\n\t\t}else if($('#outRecord').checkbox('is checked')){\n\t\t\ttypeRec = 'out';\n\t\t}\n\t\tlet numbers = ModuleExtendedCDRs.$globalSearch.val();\n\t\twindow.open('/pbxcore/api/modules/'+className+'/downloads-history?start='+startTime+'&end='+endTime+\"&numbers=\"+encodeURIComponent(numbers)+\"&type=\"+typeRec, '_blank');\n\t},\n\n\t/**\n\t *   \n\t * @param selected\n\t * @returns {[]}\n\t */\n\tmakeDropdownList(selectType, selected) {\n\t\tconst values = [\n\t\t\t{\n\t\t\t\tname: ' --- ',\n\t\t\t\tvalue: '',\n\t\t\t\tselected: ('' === selected),\n\t\t\t}\n\t\t];\n\t\t$('#'+selectType+' option').each((index, obj) => {\n\t\t\tvalues.push({\n\t\t\t\tname: obj.text,\n\t\t\t\tvalue: obj.value,\n\t\t\t\tselected: (selected === obj.value),\n\t\t\t});\n\t\t});\n\t\treturn values;\n\t},\n\n\t/**\n\t *     \n\t */\n\tchangeGroupInList(value, text, choice) {\n\t\tlet tdInput = $(choice).closest('td').find('input');\n\t\ttdInput.attr('data-value', \tvalue);\n\t\ttdInput.attr('value', \t\tvalue);\n\t\tlet currentRowId = $(choice).closest('tr').attr('id');\n\t\tlet tableName    = $(choice).closest('table').attr('id').replace('-table', '');\n\t\tif (currentRowId !== undefined && tableName !== undefined) {\n\t\t\twindow[className].sendChangesToServer(tableName, currentRowId);\n\t\t}\n\t},\n\n\t/**\n\t * Add new Table.\n\t */\n\tinitTable(tableName, options) {\n\t\tlet columns = [];\n\t\tlet columnsArray4Sort = []\n\t\tfor (let colName in options['cols']) {\n\t\t\tcolumns.push( {data: colName});\n\t\t\tcolumnsArray4Sort.push(colName);\n\t\t}\n\t\t$('#' + tableName).DataTable( {\n\t\t\tajax: {\n\t\t\t\turl: idUrl + options.ajaxUrl + '?table=' +tableName.replace('-table', ''),\n\t\t\t\tdataSrc: 'data'\n\t\t\t},\n\t\t\tcolumns: columns,\n\t\t\tpaging: true,\n\t\t\tsDom: 'rtip',\n\t\t\tdeferRender: true,\n\t\t\tpageLength: 17,\n\t\t\tinfoCallback( settings, start, end, max, total, pre ) {\n\t\t\t\treturn '';\n\t\t\t},\n\t\t\tlanguage: SemanticLocalization.dataTableLocalisation,\n\t\t\tordering: false,\n\t\t\t/**\n\t\t\t * Builder row presentation\n\t\t\t * @param row\n\t\t\t * @param data\n\t\t\t */\n\t\t\tcreatedRow(row, data) {\n\t\t\t\tlet cols    = $('td', row);\n\t\t\t\tlet headers = $('#'+ tableName + ' thead tr th');\n\t\t\t\tfor (let key in data) {\n\t\t\t\t\tlet index = columnsArray4Sort.indexOf(key);\n\t\t\t\t\tif(key === 'rowIcon'){\n\t\t\t\t\t\tcols.eq(index).html('<i class=\"ui ' + data[key] + ' circle icon\"></i>');\n\t\t\t\t\t}else if(key === 'delButton'){\n\t\t\t\t\t\tlet templateDeleteButton = '<div class=\"ui small basic icon buttons action-buttons\">' +\n\t\t\t\t\t\t\t'<a href=\"' + window[className].deleteRecordAJAXUrl + '/' +\n\t\t\t\t\t\t\tdata.id + '\" data-value = \"' + data.DT_RowId + '\"' +\n\t\t\t\t\t\t\t' class=\"ui button delete two-steps-delete popuped\" data-content=\"' + globalTranslate.bt_ToolTipDelete + '\">' +\n\t\t\t\t\t\t\t'<i class=\"icon trash red\"></i></a></div>';\n\t\t\t\t\t\tcols.eq(index).html(templateDeleteButton);\n\t\t\t\t\t}else if(key === 'priority'){\n\t\t\t\t\t\tcols.eq(index).addClass('dragHandle')\n\t\t\t\t\t\tcols.eq(index).html('<i class=\"ui sort circle icon\"></i>');\n\t\t\t\t\t\t//    .\n\t\t\t\t\t\t$(row).attr('m-priority', data[key]);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tlet template = '<div class=\"ui transparent fluid input inline-edit\">' +\n\t\t\t\t\t\t\t'<input colName=\"'+key+'\" class=\"'+inputClassName+'\" type=\"text\" data-value=\"'+data[key] + '\" value=\"' + data[key] + '\"></div>';\n\t\t\t\t\t\t$('td', row).eq(index).html(template);\n\t\t\t\t\t}\n\t\t\t\t\tif(options['cols'][key] === undefined){\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tlet additionalClass = options['cols'][key]['class'];\n\t\t\t\t\tif(additionalClass !== undefined && additionalClass !== ''){\n\t\t\t\t\t\theaders.eq(index).addClass(additionalClass);\n\t\t\t\t\t}\n\t\t\t\t\tlet header = options['cols'][key]['header'];\n\t\t\t\t\tif(header !== undefined && header !== ''){\n\t\t\t\t\t\theaders.eq(index).html(header);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet selectMetaData = options['cols'][key]['select'];\n\t\t\t\t\tif(selectMetaData !== undefined){\n\t\t\t\t\t\tlet newTemplate = $('#template-select').html().replace('PARAM', data[key]);\n\t\t\t\t\t\tlet template = '<input class=\"'+inputClassName+'\" colName=\"'+key+'\" selectType=\"'+selectMetaData+'\" style=\"display: none;\" type=\"text\" data-value=\"'+data[key] + '\" value=\"' + data[key] + '\"></div>';\n\t\t\t\t\t\tcols.eq(index).html(newTemplate + template);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t/**\n\t\t\t * Draw event - fired once the table has completed a draw.\n\t\t\t */\n\t\t\tdrawCallback(settings) {\n\t\t\t\twindow[className].drowSelectGroup(settings.sTableId);\n\t\t\t},\n\t\t} );\n\n\t\tlet body = $('body');\n\t\t//   .    .\n\t\tbody.on('focusin', '.'+inputClassName, function (e) {\n\t\t\t$(e.target).transition('glow');\n\t\t\t$(e.target).closest('div').removeClass('transparent').addClass('changed-field');\n\t\t\t$(e.target).attr('readonly', false);\n\t\t})\n\t\t//      Enter  Tab\n\t\t$(document).on('keydown', function (e) {\n\t\t\tlet keyCode = e.keyCode || e.which;\n\t\t\tif (keyCode === 13 || keyCode === 9 && $(':focus').hasClass('mikopbx-module-input')) {\n\t\t\t\twindow[className].endEditInput();\n\t\t\t}\n\t\t});\n\n\t\tbody.on('click', 'a.delete', function (e) {\n\t\t\te.preventDefault();\n\t\t\tlet currentRowId = $(e.target).closest('tr').attr('id');\n\t\t\tlet tableName    = $(e.target).closest('table').attr('id').replace('-table', '');\n\t\t\twindow[className].deleteRow(tableName, currentRowId);\n\t\t}); //   \n\n\t\t//         \n\t\tbody.on('focusout', '.'+inputClassName, window[className].endEditInput);\n\n\t\t//  \"  \"\n\t\t$('[id-table = \"'+tableName+'\"]').on('click', window[className].addNewRow);\n\t},\n\n\t/**\n\t *  ,  .\n\t */\n\tcbOnDrop(table, row) {\n\t\tlet priorityWasChanged = false;\n\t\tconst priorityData = {};\n\t\t$(table).find('tr').each((index, obj) => {\n\t\t\tconst ruleId = $(obj).attr('id');\n\t\t\tconst oldPriority = parseInt($(obj).attr('m-priority'), 10);\n\t\t\tconst newPriority = obj.rowIndex;\n\t\t\tif (!isNaN( ruleId ) && oldPriority !== newPriority) {\n\t\t\t\tpriorityWasChanged = true;\n\t\t\t\tpriorityData[ruleId] = newPriority;\n\t\t\t}\n\t\t});\n\t\tif (priorityWasChanged) {\n\t\t\t$.api({\n\t\t\t\ton: 'now',\n\t\t\t\turl: `${globalRootUrl}${idUrl}/changePriority?table=`+$(table).attr('id').replace('-table', ''),\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: priorityData,\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t *    .\n\t *    select.\n\t * @param e\n\t */\n\tendEditInput(e){\n\t\tlet $el = $('.changed-field').closest('tr');\n\t\t$el.each(function (index, obj) {\n\t\t\tlet currentRowId = $(obj).attr('id');\n\t\t\tlet tableName    = $(obj).closest('table').attr('id').replace('-table', '');\n\t\t\tif (currentRowId !== undefined && tableName !== undefined) {\n\t\t\t\twindow[className].sendChangesToServer(tableName, currentRowId);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t *     .\n\t * @param e\n\t */\n\taddNewRow(e){\n\t\tlet idTable = $(e.target).attr('id-table');\n\t\tlet table   = $('#'+idTable);\n\t\te.preventDefault();\n\t\ttable.find('.dataTables_empty').remove();\n\t\t//        \n\t\tlet $el = table.find('.changed-field').closest('tr');\n\t\t$el.each(function (index, obj) {\n\t\t\tlet currentRowId = $(obj).attr('id');\n\t\t\tif (currentRowId !== undefined) {\n\t\t\t\twindow[className].sendChangesToServer(currentRowId);\n\t\t\t}\n\t\t});\n\t\tlet id = \"new\"+Math.floor(Math.random() * Math.floor(500));\n\t\tlet rowTemplate = '<tr id=\"'+id+'\" role=\"row\" class=\"even\">'+table.find('tr#TEMPLATE').html().replace('TEMPLATE', id)+'</tr>';\n\t\ttable.find('tbody > tr:first').before(rowTemplate);\n\t\twindow[className].drowSelectGroup(idTable);\n\t},\n\n\t/**\n\t *  select .\n\t * @param tableId\n\t */\n\tdrowSelectGroup(tableId) {\n\t\t$('#' + tableId).find('tr#TEMPLATE').hide();\n\t\tlet selestGroup = $('.select-group');\n\t\tselestGroup.each((index, obj) => {\n\t\t\tlet selectType = $(obj).closest('td').find('input').attr('selectType');\n\t\t\t$(obj).dropdown({\n\t\t\t\tvalues: window[className].makeDropdownList(selectType, $(obj).attr('data-value')),\n\t\t\t});\n\t\t});\n\t\tselestGroup.dropdown({\n\t\t\tonChange: window[className].changeGroupInList,\n\t\t});\n\n\t\t$('#' + tableId).tableDnD({\n\t\t\tonDrop: window[className].cbOnDrop,\n\t\t\tonDragClass: 'hoveringRow',\n\t\t\tdragHandle: '.dragHandle',\n\t\t});\n\t},\n\n\t/**\n\t *  \n\t * @param tableName\n\t * @param id - record id\n\t */\n\tdeleteRow(tableName, id) {\n\t\tlet table = $('#'+ tableName+'-table');\n\t\tif (id.substr(0,3) === 'new') {\n\t\t\ttable.find('tr#'+id).remove();\n\t\t\treturn;\n\t\t}\n\t\t$.api({\n\t\t\turl: window[className].deleteRecordAJAXUrl+'?id='+id+'&table='+tableName,\n\t\t\ton: 'now',\n\t\t\tonSuccess(response) {\n\t\t\t\tif (response.success) {\n\t\t\t\t\ttable.find('tr#'+id).remove();\n\t\t\t\t\tif (table.find('tbody > tr').length === 0) {\n\t\t\t\t\t\ttable.find('tbody').append('<tr class=\"odd\"></tr>');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t *      \n\t */\n\tsendChangesToServer(tableName, recordId) {\n\t\tlet data = { 'pbx-table-id': tableName, 'pbx-row-id':  recordId};\n\t\tlet notEmpty = false;\n\t\t$(\"tr#\"+recordId + ' .' + inputClassName).each(function (index, obj) {\n\t\t\tlet colName = $(obj).attr('colName');\n\t\t\tif(colName !== undefined){\n\t\t\t\tdata[$(obj).attr('colName')] = $(obj).val();\n\t\t\t\tif($(obj).val() !== ''){\n\t\t\t\t\tnotEmpty = true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(notEmpty === false){\n\t\t\treturn;\n\t\t}\n\t\t$(\"tr#\"+recordId+\" .user.circle\").removeClass('user circle').addClass('spinner loading');\n\t\t$.api({\n\t\t\turl: window[className].saveTableAJAXUrl,\n\t\t\ton: 'now',\n\t\t\tmethod: 'POST',\n\t\t\tdata: data,\n\t\t\tsuccessTest(response) {\n\t\t\t\treturn response !== undefined && Object.keys(response).length > 0 && response.success === true;\n\t\t\t},\n\t\t\tonSuccess(response) {\n\t\t\t\tif (response.data !== undefined) {\n\t\t\t\t\tlet rowId = response.data['pbx-row-id'];\n\t\t\t\t\tlet table = $('#'+response.data['pbx-table-id']+'-table');\n\t\t\t\t\ttable.find(\"tr#\" + rowId + \" input\").attr('readonly', true);\n\t\t\t\t\ttable.find(\"tr#\" + rowId + \" div\").removeClass('changed-field loading').addClass('transparent');\n\t\t\t\t\ttable.find(\"tr#\" + rowId + \" .spinner.loading\").addClass('user circle').removeClass('spinner loading');\n\n\t\t\t\t\tif (rowId !== response.data['newId']){\n\t\t\t\t\t\t$(`tr#${rowId}`).attr('id', response.data['newId']);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tonFailure(response) {\n\t\t\t\tif (response.message !== undefined) {\n\t\t\t\t\tUserMessage.showMultiString(response.message);\n\t\t\t\t}\n\t\t\t\t$(\"tr#\" + recordId + \" .spinner.loading\").addClass('user circle').removeClass('spinner loading');\n\t\t\t},\n\t\t\tonError(errorMessage, element, xhr) {\n\t\t\t\tif (xhr.status === 403) {\n\t\t\t\t\twindow.location = globalRootUrl + \"session/index\";\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Change some form elements classes depends of module status\n\t */\n\tcheckStatusToggle() {\n\t\tif (window[className].$statusToggle.checkbox('is checked')) {\n\t\t\twindow[className].$disabilityFields.removeClass('disabled');\n\t\t\twindow[className].$moduleStatus.show();\n\t\t} else {\n\t\t\twindow[className].$disabilityFields.addClass('disabled');\n\t\t\twindow[className].$moduleStatus.hide();\n\t\t}\n\t},\n\n\t/**\n\t * Send command to restart module workers after data changes,\n\t * Also we can do it on TemplateConf->modelsEventChangeData method\n\t */\n\tapplyConfigurationChanges() {\n\t\twindow[className].changeStatus('Updating');\n\t\t$.api({\n\t\t\turl: `${Config.pbxUrl}/pbxcore/api/modules/`+className+`/reload`,\n\t\t\ton: 'now',\n\t\t\tsuccessTest(response) {\n\t\t\t\t// test whether a JSON response is valid\n\t\t\t\treturn Object.keys(response).length > 0 && response.result === true;\n\t\t\t},\n\t\t\tonSuccess() {\n\t\t\t\twindow[className].changeStatus('Connected');\n\t\t\t},\n\t\t\tonFailure() {\n\t\t\t\twindow[className].changeStatus('Disconnected');\n\t\t\t},\n\t\t});\n\t},\n\n\t/**\n\t * We can modify some data before form send\n\t * @param settings\n\t * @returns {*}\n\t */\n\tcbBeforeSendForm(settings) {\n\t\tconst result = settings;\n\t\tresult.data = window[className].$formObj.form('get values');\n\t\treturn result;\n\t},\n\n\t/**\n\t * Some actions after forms send\n\t */\n\tcbAfterSendForm() {\n\t\twindow[className].applyConfigurationChanges();\n\t},\n\n\t/**\n\t * Initialize form parameters\n\t */\n\tinitializeForm() {\n\t\tForm.$formObj = window[className].$formObj;\n\t\tForm.url = `${globalRootUrl}${idUrl}/save`;\n\t\tForm.validateRules = window[className].validateRules;\n\t\tForm.cbBeforeSendForm = window[className].cbBeforeSendForm;\n\t\tForm.cbAfterSendForm = window[className].cbAfterSendForm;\n\t\tForm.initialize();\n\t},\n\n\t/**\n\t * Update the module state on form label\n\t * @param status\n\t */\n\tchangeStatus(status) {\n\t\tswitch (status) {\n\t\t\tcase 'Connected':\n\t\t\t\twindow[className].$moduleStatus\n\t\t\t\t\t.removeClass('grey')\n\t\t\t\t\t.removeClass('red')\n\t\t\t\t\t.addClass('green');\n\t\t\t\twindow[className].$moduleStatus.html(globalTranslate.module_export_recordsConnected);\n\t\t\t\tbreak;\n\t\t\tcase 'Disconnected':\n\t\t\t\twindow[className].$moduleStatus\n\t\t\t\t\t.removeClass('green')\n\t\t\t\t\t.removeClass('red')\n\t\t\t\t\t.addClass('grey');\n\t\t\t\twindow[className].$moduleStatus.html(globalTranslate.module_export_recordsDisconnected);\n\t\t\t\tbreak;\n\t\t\tcase 'Updating':\n\t\t\t\twindow[className].$moduleStatus\n\t\t\t\t\t.removeClass('green')\n\t\t\t\t\t.removeClass('red')\n\t\t\t\t\t.addClass('grey');\n\t\t\t\twindow[className].$moduleStatus.html(`<i class=\"spinner loading icon\"></i>${globalTranslate.module_export_recordsUpdateStatus}`);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\twindow[className].$moduleStatus\n\t\t\t\t\t.removeClass('green')\n\t\t\t\t\t.removeClass('red')\n\t\t\t\t\t.addClass('grey');\n\t\t\t\twindow[className].$moduleStatus.html(globalTranslate.module_export_recordsDisconnected);\n\t\t\t\tbreak;\n\t\t}\n\t},\n};\n\n$(document).ready(() => {\n\twindow[className].initialize();\n});\n\n"],"file":"module-export-records-index.js"}